<!-- admin/components/nav.html -->
<div class="admin-sidebar w-72 text-white flex flex-col shadow-2xl relative overflow-hidden">
    <!-- Vanta Background for Sidebar -->
    <div id="sidebar-vanta" class="absolute inset-0 z-0"></div>
    
    <div class="relative z-10 flex flex-col h-full bg-gradient-to-b from-blue-900/90 to-blue-800/90 backdrop-blur-sm">
        <!-- Logo Area with Animation -->
        <div class="p-6 border-b border-white/10">
            <div class="flex items-center space-x-3">
                <div class="w-12 h-12 bg-gradient-to-br from-cyan-400 to-blue-500 rounded-xl flex items-center justify-center text-2xl animate-pulse shadow-lg">
                    üé®
                </div>
                <div>
                    <h2 class="font-bold text-xl tracking-tight bg-gradient-to-r from-white to-blue-200 bg-clip-text text-transparent">MadaBrand</h2>
                    <p class="text-xs text-white/70 flex items-center gap-1">
                        <span class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></span>
                        Admin Dashboard
                    </p>
                </div>
            </div>
        </div>
        
        <!-- Navigation Menu -->
        <nav class="flex-1 px-3 py-6 space-y-1 overflow-y-auto">
            <div class="text-xs font-semibold text-white/40 uppercase tracking-wider px-4 mb-2">Main</div>
            
            <a href="/admin/" class="sidebar-item flex items-center space-x-3 px-4 py-3 text-white/80 hover:text-white hover:bg-white/10 rounded-xl transition-all duration-300 group" data-page="dashboard">
                <span class="text-xl group-hover:scale-110 transition-transform">üìä</span>
                <span class="font-medium">Dashboard</span>
                <span class="ml-auto bg-white/10 text-xs px-2 py-1 rounded-full opacity-0 group-hover:opacity-100 transition">Home</span>
            </a>
            
            <a href="/admin/portfolio-manager.html" class="sidebar-item flex items-center space-x-3 px-4 py-3 text-white/80 hover:text-white hover:bg-white/10 rounded-xl transition-all duration-300 group" data-page="portfolio">
                <span class="text-xl group-hover:scale-110 transition-transform">üìÅ</span>
                <span class="font-medium">Portfolio Manager</span>
                <span class="ml-auto bg-blue-500 text-xs px-2 py-1 rounded-full animate-pulse" id="portfolio-count">0</span>
            </a>
            
            <a href="/admin/content-editor.html" class="sidebar-item flex items-center space-x-3 px-4 py-3 text-white/80 hover:text-white hover:bg-white/10 rounded-xl transition-all duration-300 group" data-page="content">
                <span class="text-xl group-hover:scale-110 transition-transform">‚úèÔ∏è</span>
                <span class="font-medium">Content Editor</span>
                <span class="ml-auto bg-green-500 text-xs px-2 py-1 rounded-full" id="content-count">6</span>
            </a>
            
            <a href="/admin/media-library.html" class="sidebar-item flex items-center space-x-3 px-4 py-3 text-white/80 hover:text-white hover:bg-white/10 rounded-xl transition-all duration-300 group" data-page="media">
                <span class="text-xl group-hover:scale-110 transition-transform">üñºÔ∏è</span>
                <span class="font-medium">Media Library</span>
                <span class="ml-auto bg-purple-500 text-xs px-2 py-1 rounded-full" id="media-count">0</span>
            </a>
            
            <a href="/admin/settings.html" class="sidebar-item flex items-center space-x-3 px-4 py-3 text-white/80 hover:text-white hover:bg-white/10 rounded-xl transition-all duration-300 group" data-page="settings">
                <span class="text-xl group-hover:scale-110 transition-transform">‚öôÔ∏è</span>
                <span class="font-medium">Settings</span>
            </a>
            
            <div class="border-t border-white/10 my-4"></div>
            
            <div class="text-xs font-semibold text-white/40 uppercase tracking-wider px-4 mb-2">System</div>
            
            <a href="#" onclick="createBackup()" class="sidebar-item flex items-center space-x-3 px-4 py-3 text-white/80 hover:text-white hover:bg-white/10 rounded-xl transition-all duration-300 group">
                <span class="text-xl group-hover:scale-110 transition-transform">üíæ</span>
                <span class="font-medium">Backup Now</span>
            </a>
            
            <a href="/" target="_blank" class="sidebar-item flex items-center space-x-3 px-4 py-3 text-white/80 hover:text-white hover:bg-white/10 rounded-xl transition-all duration-300 group">
                <span class="text-xl group-hover:scale-110 transition-transform">üåê</span>
                <span class="font-medium">View Site</span>
            </a>
        </nav>
        
        <!-- User Profile Section -->
        <div class="p-4 border-t border-white/10 bg-white/5">
            <div class="flex items-center space-x-3 px-4 py-3">
                <div class="relative">
                    <div class="w-10 h-10 bg-gradient-to-br from-cyan-400 to-blue-500 rounded-xl flex items-center justify-center text-white font-bold text-lg shadow-lg">
                        A
                    </div>
                    <div class="absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 border-2 border-white rounded-full animate-pulse"></div>
                </div>
                <div class="flex-1">
                    <p class="text-sm font-medium text-white" id="admin-name">Admin User</p>
                    <p class="text-xs text-white/60" id="admin-role">Administrator</p>
                </div>
                <button onclick="logoutAdmin()" class="text-white/60 hover:text-white transition-transform hover:scale-110" title="Logout">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Quick Stats -->
            <div class="grid grid-cols-2 gap-2 mt-3 pt-3 border-t border-white/10">
                <div class="text-center">
                    <p class="text-xs text-white/40">Session</p>
                    <p class="text-sm font-medium text-white flex items-center justify-center gap-1">
                        <span class="w-2 h-2 bg-green-400 rounded-full"></span>
                        Active
                    </p>
                </div>
                <div class="text-center">
                    <p class="text-xs text-white/40">Role</p>
                    <p class="text-sm font-medium text-white">Admin</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Mobile Menu Toggle -->
<button id="mobile-menu-toggle" class="lg:hidden fixed top-4 left-4 z-50 w-12 h-12 bg-gradient-to-r from-blue-900 to-blue-800 rounded-xl shadow-lg flex items-center justify-center text-white hover:scale-110 transition-transform">
    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
    </svg>
</button>

<style>
.sidebar-item {
    position: relative;
    overflow: hidden;
}

.sidebar-item::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
    transition: left 0.5s;
}

.sidebar-item:hover::before {
    left: 100%;
}

.sidebar-item.active {
    background: rgba(255,255,255,0.15);
    border-left: 3px solid #fff;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
}
</style>

<script>
// Load counts for badges
async function loadCounts() {
    try {
        const API_BASE = '/api';
        
        // Load portfolio count
        const portfolioRes = await fetch(`${API_BASE}/portfolio`, {
            headers: { 'Authorization': 'Bearer MADA2024' }
        });
        const portfolioData = await portfolioRes.json();
        document.getElementById('portfolio-count').textContent = portfolioData.projects?.length || 0;
        
        // Load media count
        const mediaRes = await fetch(`${API_BASE}/media`, {
            headers: { 'Authorization': 'Bearer MADA2024' }
        });
        const mediaData = await mediaRes.json();
        document.getElementById('media-count').textContent = mediaData.files?.length || 0;
        
        // Content count is static for now
        document.getElementById('content-count').textContent = '6';
    } catch (error) {
        console.error('Error loading counts:', error);
        // Set fallback values
        document.getElementById('portfolio-count').textContent = '0';
        document.getElementById('media-count').textContent = '0';
        document.getElementById('content-count').textContent = '6';
    }
}

// Highlight current page
document.addEventListener('DOMContentLoaded', function() {
    const currentPage = window.location.pathname.split('/').pop() || 'index.html';
    document.querySelectorAll('.sidebar-item').forEach(item => {
        const href = item.getAttribute('href');
        if (href === currentPage || (currentPage === 'index.html' && href === '/admin/')) {
            item.classList.add('active');
        }
    });
    
    loadCounts();
    
    // Mobile menu toggle
    const menuToggle = document.getElementById('mobile-menu-toggle');
    const sidebar = document.querySelector('.admin-sidebar');
    
    if (menuToggle && sidebar) {
        menuToggle.addEventListener('click', () => {
            sidebar.classList.toggle('translate-x-0');
            sidebar.classList.toggle('-translate-x-full');
        });
    }
});

// Logout function
function logoutAdmin() {
    sessionStorage.removeItem('adminAuth');
    sessionStorage.removeItem('adminLoginTime');
    localStorage.removeItem('adminRemember');
    window.location.href = '/admin/login.html';
}

// Initialize Vanta for sidebar
if (typeof VANTA !== 'undefined') {
    VANTA.WAVES({
        el: "#sidebar-vanta",
        color: 0x1e3a8a,
        waveHeight: 20,
        shininess: 30,
        waveSpeed: 1,
        zoom: 0.8
    });
}
</script>